<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MDE reset</title>
<style>
body{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial; background:#0b0f14;color:#e6edf3;margin:0;padding:20px;}
code{background:#111827;padding:2px 6px;border-radius:6px;}
</style>
</head>
<body>
<h1>Reset</h1>
<p>キャッシュと Service Worker を削除しています…</p>
<script>
(async()=>{
  try {
    if ('serviceWorker' in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      await Promise.all(regs.map(r => r.unregister()));
    }
    if (window.caches) {
      const keys = await caches.keys();
      await Promise.all(keys.map(k => caches.delete(k)));
    }
  } catch(e) {}
  // hard reload to versioned entry
  const url = new URL(location.href);
  url.pathname = url.pathname.replace(/reset\.html$/, '');
  url.search = '?v=9.6.21&fresh=' + Date.now();
  location.replace(url.toString());
})();
</script>
</body>
</html>
